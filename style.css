/* Discourse base stylesheet overrides
 * Copyright (C) Selene ToyKeeper
 * SPDX-License-Identifier: GPL-3.0-or-later
 */
/* Comments use this structure:
- div.topic-post
  - article
    - div.row
      - div.topic-avatar
      - div.topic-body
        - div.topic-meta-data
        - div."regular contents"
          - div.cooked (comment body)
          - section.post-menu-area (buttons below comment)
*/

/********** banner at top of page **********/
.d-header {
    height: 4em;
    background: linear-gradient(var(--header-bg-top), var(--header-bg-bot));
    border-bottom: var(--section-border-width) solid var(--header-border);
    box-shadow: var(--header-shadow);
}
/* prevent bottom of page title from getting cropped */
.extra-info-wrapper .header-title a {
    line-height: initial; /* parent theme tries to be clever, and fails */
}
/*
.d-header-icons a {
    background-color: var(--header-icon-bg) !important;
    color: var(--header-icon-fg) !important;
}
*/
/* number in a circle, when there are new notifications */
.d-header-icons .unread-notifications {
    background-color: var(--tertiary-med-or-tertiary);
}
.d-header-icons a:hover {
    background-color: var(--header-icon-bg-hover) !important;
    color: var(--header-icon-fg-hover) !important;
}
#main-outlet {
    padding-top: 0.75em;
}
.d-header-icons .icon {
    border-radius: 8px;
}

/********** left sidebar **********/
.sidebar-wrapper {
    background-color: var(--sidebar-color);
    /* background: linear-gradient(90deg, #2f2f3e,#252533); */
}
body.has-sidebar-page .sidebar-wrapper {
    /* only draw border when sidebar is NOT collapsed */
    border-right: var(--section-border-width) solid var(--sidebar-border);
}
.sidebar-footer-wrapper .sidebar-footer-container,
.sidebar-hamburger-dropdown .sidebar-footer-wrapper .sidebar-footer-container {
    background: none;
}
.sidebar-footer-wrapper .sidebar-footer-container:before,
.sidebar-hamburger-dropdown .sidebar-footer-wrapper .sidebar-footer-container:before
{
    background: linear-gradient(#00000000, var(--sidebar-color));
}
/* dropdown / pop-over version on narrow screens */
.menu-panel {
    border: 1px outset var(--sidebar-color);
    background-color: var(--sidebar-color);
}
/* space between sidebar and main content */
body.has-sidebar-page #main-outlet-wrapper {
    gap: 0 0.75em;
}
/* reduce side padding on mobile view */
.mobile-view #main-outlet-wrapper {
    padding: 0 0.25em 0 0.333em;
}
.mobile-view .container.posts>.row {
    max-width: calc(100vw - 0.5em);
}

/********** ads **********/
div.p1-banner, div.p2-banner, div.p3-banner, div.house-banner {
    border: 1px outset var(--ads-hl);
    background: linear-gradient(var(--ads-top), var(--ads-bot));
    border-radius: calc(var(--post-border-radius) * 0.5);
    padding: calc(var(--post-padding) * 0.5);
    margin: 0px 0px 10px 0px;
}

/********** front page main navigation buttons **********/
.nav-pills>li a {
    transition: var(--hover-anim-time);
}
.nav-pills>li a:hover {
    box-shadow: var(--hover-shadow-args);
}

/********** thread posts / comments **********/
/* some posts get a bogus min-height style, unsure why */
div.topic-post {
    min-height: 0px !important;
}

/* outer container for comments */
/* using "article" instead of "div.topic-post"
 * because "article" has more attributes to select by, for per-user styling */
article, /* regular post */
article.boxed, /* mobile version */
.user-stream .item, /* user activity feed */
.search-results .fps-result, /* search widget item */
.d-toc-main, /* table of contents on first post */
.presence-users, /* pops up when someone is writing a reply */
div.dummy-placeholder {
    border: 1px outset var(--post-def-hl);
    background: linear-gradient(var(--post-def-top), var(--post-def-bot));
    border-radius: var(--post-border-radius);
    padding: var(--post-padding);
    margin: 0px 0px 10px 0px;
    box-shadow: var(--post-shadows);
}
.topic-list-item td:first-child, .topic-post {
    border-left: none; /* override keyboard_shortcuts.scss:3 */
}

/* extra messages at top of post, like "it's been a while since we saw this user" */
.post-notice {
    padding: 2px;
    margin-bottom: 8px;
    max-width: 100%; /* remove arbitrary limit, go as wide as the post */
    border-radius: 8px;
    border: 1px outset var(--post-notice-top);
    background: linear-gradient(-2deg, var(--post-notice-bot), var(--post-notice-top));
    color: var(--post-notice-fg);
}

/* draw a box around avatar pics */
div.topic-avatar, /* main post avatar */
.embedded-posts .topic-avatar, /* embedded post avatar */
div.avatar-wrapper, /* per item in user activity stream */
.search-results .avatar, /* search widget results */
.presence-avatars, /* when someone is writing a reply */
div.dummy-placeholder {
    background: linear-gradient(-45deg, var(--avatar-bot),var(--avatar-top));
    box-shadow: var(--post-widget-shadows);
    border: 1px outset var(--avatar-hl);
    border-radius: 6px;
    padding: 5px 6px 6px 5px;
    /* important because some posts explicitly set a huge bottom margin */
    margin: 0px 8px 0px 0px !important;
    transition: var(--hover-anim-time);
}
.embedded-posts .topic-avatar,
div.avatar-wrapper,
.presence-avatars, /* when someone is writing a reply */
div.dummy-placeholder {
    border-radius: 5px;
    padding: 3px 4px 4px 3px;
    margin: 0 6px 0 0 !important;
    transition: var(--hover-anim-time);
}
div.topic-avatar:hover, /* main post avatar */
.embedded-posts .topic-avatar:hover, /* embedded post avatar */
div.avatar-wrapper:hover, /* per item in user activity stream */
.search-results .avatar:hover, /* search widget results */
.presence-avatars:hover, /* when someone is writing a reply */
.embedded-posts .topic-avatar:hover,
div.avatar-wrapper:hover,
.presence-avatars:hover, /* when someone is writing a reply */
div.dummy-placeholder {
    box-shadow: var(--hover-shadow-args);
}
img.avatar {
    border-radius: 0.15em;
}
.avatar-wrapper {
    /* remove blue circle behind avatar in user activity stream */
    background: unset;
    border-radius: unset;
}

.topic-body {
    padding: 0;
    /* border: 1px outset #555; */
    /* border-left: 1px solid #555; */
    border: none;
    border-radius: 8px;
}

/* put the post header data into a themed bar */
.topic-body .topic-meta-data {
    background: linear-gradient(var(--post-def-bar-top), var(--post-def-bar-bot));
    /* padding: 3px 2px 3px 3px; */
    /* margin: 0px 0px 0px 5px; */
    margin: 0px;
    border-radius: 6px 6px 0px 0px;
    border-style: none;
    box-shadow: var(--post-widget-shadows);
    /* override topic-post.scss:476 */
    padding: 3px 8px 2px 8px;
}
.names span a {
    /* name of post author */
    /* copied directly from parent theme, but added "!important"
     * to override parent theme's corner cases like this one:
     *   .first.new-user:not(.staff) a { color: var(--primary-low-mid); }
     * (it uses a hard-to-read color for who-knows-how-many special cases)
     */
    color: var(--primary-high-or-secondary-low) !important;
}
.relative-date:hover {
    color: var(--button-text-hover);
    transition: .25s;
}
/* reply-to header */
.topic-body .reply-to-tab {
    color: var(--post-header-button);
}
.reply-to-tab img.avatar {
    position: absolute;
    margin-left: 18px;
    margin-top: 0px;
}
.reply-to-tab .d-icon-share {
    margin-right: 32px;
}
.post-info.edits {
    background-color: var(--post-header-button-bg);
    border-radius: var(--button-border-radius);
    margin: 0.15em 0.5em 0 0;
    padding: 0.06em 0 0.06em 0;
}
.post-info.edits .btn-flat {
    border-radius: var(--button-border-radius);
}
.topic-meta-data .post-info a {
    color: var(--post-header-button);
}
.embedded-posts .arrow {
    color: var(--post-header-button);
}
.quote-controls, .quote-controls .d-icon {
    color: var(--post-header-button);
}

/* post edited colors */
.post-info.edits .widget-button .d-icon,
.post-info.edits .widget-button .d-button-label {
    transition: color .25s;
    color: var(--heatmap-medium-color);
}

.discourse-no-touch .post-info.edits .widget-button:hover .d-icon,
.discourse-no-touch .post-info.edits .widget-button:hover .d-button-label {
    color: var(--heatmap-high-color);
}

.post-info.edits .widget-button .d-icon {
    transition: color .3s;
}

/* main comment body */
.topic-body .cooked {
    /* padding: 5px 10px 0px 10px; */
    padding: 5px 0px 0px 0px;
    margin: 0px;
    /* background: linear-gradient(#ffffff20, #00000040); */
    border-radius: 0px 0px 8px 8px;
}

/* remove extra space after last paragraph of each comment */
.cooked p:last-of-type {
    /* margin-bottom: 2px; */ /* looks good with text, bad when p>img is last element */
    margin-bottom: 0.5em;
}

.mobile-view .boxed .contents {
    padding: 0;
}

/* remove extra space at bottom of comments */
section.post-menu-area, section.post-actions {
    margin: 0px;
}

/* reduce extra space around buttons at bottom of comments */
nav.post-controls .actions button, nav.post-controls .show-replies {
    padding: 0px 5px;
    border-radius: var(--button-border-radius);
}
.mobile-view nav.post-controls .actions button,
.mobile-view nav.post-controls .show-replies {
    /* override massive vertical padding */
    padding: 0px 0.666em !important;
}
/* remove spurious scrollbar on mobile */
nav.post-controls {
    /* overflow-x: auto; */ /* causes clipping and a scrollbar when using box-shadow() */
    overflow-x: visible;
}

/* container for buttons at the bottom of posts */
div.actions {
    padding: 5px;
    border-radius: var(--post-action-bar-border-radius);
    background: var(--post-action-bar-bg);
    box-shadow: var(--action-bar-shadows);
    transition: var(--hover-anim-time);
}
div.actions:hover {
    /* border-radius: var(--hover-border-radius); */
    box-shadow: var(--hover-shadow-args);
}
div.actions .btn-flat:hover {
    box-shadow: none;
}
nav.post-controls .actions button.create, nav.post-controls .actions button.create .d-icon {
    color: var(--reply-action);
}

/********** quoted posts **********/
aside.quote, /* quoted post */
div.dummy-placeholder {
    margin-top: 0;
    margin-bottom: 0.5em;
    background: none !important;
}
.quote aside .quote { /* remove inconsistent blockquote border */
    border-left: 0;
}
blockquote,
aside.quote .title
{ /* add a consistent blockquote border */
    border-left: 5px solid var(--post-quote-border) !important;
}
blockquote { /* bare blockquote with no title */
    padding: 0.5em;
    margin: 0 0 0.5em 0;
    border-radius: 0 8px 8px 0;
}
blockquote { background: var(--blockquote-bg-odd) !important; }
blockquote blockquote { background: var(--blockquote-bg-even) !important; }
blockquote blockquote blockquote { background: var(--blockquote-bg-odd) !important; }
blockquote blockquote blockquote blockquote{ background: var(--blockquote-bg-even) !important; }
blockquote blockquote blockquote blockquote blockquote{ background: var(--blockquote-bg-odd) !important; }
aside.quote .title { /* title bar for quoted posts */
    background: linear-gradient(var(--quote-header-top), var(--quote-header-bot));
    padding: 0.25em;
}
aside.quote .title { /* top right corner of a quote */
    border-radius: 0 8px 0 0;
}
.title + blockquote { /* quote after a title bar */
    border-radius: 0 0 8px 0;
}
.quote-controls {
    margin: 0.2em 0.2em 0.1em 0;
}

/********** embedded posts **********/
/* make embedded posts (expanded replies) look indented */
.embedded-posts {
    margin-top: 10px;
    border: none;
}
.embedded-posts.top {
    margin: 0 0 10px 0;
    width: 100%;
}
.embedded-posts.top .reply {
    margin: 0;
}
.embedded-posts .topic-body {
    width: 100%; /* remove calculated extra padding from parent theme */
}
.embedded-posts .reply, aside.onebox {
    margin-top: 10px;
    padding: 5px;
    border: 1px inset var(--post-embed-hl);
    border-radius: var(--post-border-radius);
    background: linear-gradient(var(--post-embed-top), var(--post-embed-bot));
}
.embedded-posts.bottom .row {
    padding: 0; /* remove extra space inside bottom of embedded posts */
}
.embedded-posts.bottom {
    margin-bottom: 0px; /* remove extra space below embedded posts */
}
aside.onebox header {
    margin-bottom: 0.5em;
}
.onebox article {
    margin: 0;
}
.onebox .label1 {
    /* override onebox.scss:748 */
    /* parent theme breaks part of the post out of its container,
       which makes it draw over other elements ... so don't do that.
       */
    float: none !important;
}

/* quoted part of a post, when expanded to show the rest */
span.highlighted {
    color: var(--highlighted-fg);
    background: var(--highlighted-bg);
}

/********** tables inside posts **********/
.cooked tbody {
    border: none;
}
.cooked th,
.d-editor-preview-wrapper th,
.modal-body th  /* "expand table" view */
{
    background: var(--post-table-th-bg);
    color: var(--primary);
}
.cooked tr,
.d-editor-preview-wrapper tr,
.modal-body tr
{
    background: var(--post-table-even-row-bg);
}
.cooked tr:nth-child(odd),
.d-editor-preview-wrapper tr:nth-child(odd),
.modal-body tr:nth-child(odd)
{
    background: var(--post-table-odd-row-bg);
}


/********** linked threads at bottom of post **********/
.post-links-container .post-links {
    margin-top: 0.5em;
    padding-top: 0.5em;
}
.post-links-container .post-links li:last-of-type {
    margin-bottom: 0em;
}

/********** last-visited line **********/
.small-action.topic-post-visited .topic-post-visited-line {
    width: 100%;
    border-top: 1px solid var(--last-visit-bg);
    border-bottom: 1px solid var(--last-visit-bg);
    margin: 8px 12px 20px 12px;
}
.small-action.topic-post-visited .topic-post-visited-line .topic-post-visited-message {
    color: var(--last-visit-fg);
    background-color: var(--last-visit-bg);
    border-radius: 99px;
    padding: 0.1em 0.6em;
}

/********** time gap widget **********/
.time-gap, .time-gap.small-action {
    border: none;
}
.time-gap .topic-avatar {
    display: none; /* there is no avatar; it just makes an empty box */
}
.small-action .small-action-desc {
    border: none;
}

/********** "topic map" at bottom of first post **********/
.topic-map, .archetype-private_message .topic-map {
    padding: 0;
    margin: 0.5em 0 0 -4.2em;
    border-radius: 8px;
    border: 1px outset var(--topic-map-bg);
    background: var(--topic-map-bg);
}
.mobile-view .topic-map,
.mobile-view .archetype-private_message .topic-map {
    margin: 0.5em 0 0 0;
}
.topic-map section {
    border: none;
    border-radius: 8px;
}
.topic-map .buttons .btn {
    border-radius: 20px;
    padding: 0 0.7em;
    margin: 0.5em 0.5em;
}
.map:first-of-type .buttons .btn {
    max-height: 2.5em;
}
/* don't let even/odd table rows change the color here */
.topic-map .topic-links tr {
    background: none;
}

/********** private messages **********/
/* private messages have special styling from the parent theme, which needs to be unset */
/* the selectors are copied from the parent theme */
.topic-post.sticky-avatar .topic-avatar {
    margin-bottom: 0;
}
.archetype-private_message .topic-avatar {
    border: 1px outset var(--avatar-hl);
}
.archetype-private_message .current-user-post:not(.moderator) .topic-body .cooked {
    background: none;
}
.archetype-private_message .topic-body .cooked,
.archetype-private_message .current-user-post .topic-body .cooked {
    border: none;
}
.archetype-private_message .topic-body .cooked {
    margin: 0;
    padding: 5px 0px 0px 0px;
}
.archetype-private_message {
    --border-radius: 8px;
}

/********** blank space below thread **********/
.topic-above-footer-buttons-outlet.presence {
    min-height: 0;
    margin: 0;
    padding: 0;
}
#topic-footer-buttons {
    margin: 0 !important;
}
.topic-footer-main-buttons {
    margin: 0 0 0 0.5em !important;
}

/********** widget showing the current view is a summary **********/
.posts-filtered-notice {
    box-shadow: 0 -0.5em 1.0em var(--menu-shadow-color);
    color: var(--header_primary);
    background: linear-gradient(var(--header-bg-bot), var(--header-bg-top));
    border-radius: var(--post-border-radius) var(--post-border-radius) 0 0;
    border: 1px outset var(--header-bg-top);
    z-index: 100;  /* above the floating mini timeline widget */
}

/********** editor **********/
.open .grippie {
    background: linear-gradient(var(--post-me-bar-top), var(--post-me-bar-bot));
    border-top: 1px outset var(--post-me-bar-top);
    padding: 6px 0;
}
.open .grippie:before {
    border-top: 3px double #ffffff60;
    width: 3em;
}
.open .grippie:hover:before {
    border-top: 3px double #ffffffc0;
}
#reply-control {
    box-shadow: 0 -0.5em 1.0em var(--menu-shadow-color);
}
#reply-control .reply-area {
    background: var(--primary-low);
}
.quote-button {
    border-radius: 16px;
    /* background: none; */
    /* border: none; */
}
/* make the editor buttons fit into smaller spaces */
.d-editor-button-bar {
    grid-template-columns: repeat(auto-fit, minmax(1.333em, 1fr));
}
.d-editor-button-bar .btn {
    border: none;
    box-shadow: none;
    padding: 0.25em 0.25em;
}
.d-editor-container {
    column-gap: 0.5em;
}
.d-editor-textarea-column {
    /* is needed to make editor and preview closer to the same size */
    margin: 0 0 0 0.25em;
    min-width: calc(50% + 0.5em - var(--post-padding) - var(--post-padding));
}
.d-editor-textarea-wrapper {
    border: 3px inset var(--editor-hl) !important;
    background: var(--editor-bg);
}
.d-editor-preview-wrapper {
    min-width: calc(50% - 0.5em + 1px - var(--post-padding) - var(--post-padding));
    margin: 0 0.25em 0 0;
    border: 1px outset var(--post-me-hl);
    background: linear-gradient(var(--post-me-top), var(--post-me-bot));
    padding: var(--post-padding);
    border-radius: var(--post-border-radius);
    box-shadow: var(--post-shadows);
}
textarea {
    /* 2px less to make up for the difference between a 3px and 1px border width */
    padding: calc(var(--post-padding) - 2px) !important;
    color: var(--editor-unfocused); /* unfocused */
}
textarea:focus, .d-editor-textarea-wrapper.in-focus textarea, .d-editor-textarea-wrapper.in-focus {
    color: var(--editor-fg);
    outline-color: var(--primary-low);
    border-color: var(--editor-hl);
}
 /* pops up when someone is writing a reply, remove some decoration */
.reply-to .presence-users, .reply-to .presence-avatars {
    padding: 0;
    margin: 0;
    border: none;
    background: none;
    box-shadow: none;
}

/********** user info screen **********/
.user-main .about .details, .user-main .about.collapsed-info .details {
    background: var(--topic-map-bg);
    border: 1px outset var(--topic-map-bg);
    border-radius: var(--post-border-radius);
    padding: var(--post-padding);
    box-shadow: var(--post-shadows);
}

/********** user info pop-up widget **********/
.user-card.show, .group-card.show {
    border-radius: var(--post-border-radius);
    background: linear-gradient(var(--post-def-top), var(--post-def-bot));
    outline: none;
    border: 3px outset var(--post-def-hl);
    box-shadow: 0.5em 1.5em 2em var(--shadow-color);
}
.user-card .card-content, .group-card .card-content, .d-user-card__main-content {
    background: none;
}
.user-card .first-row .names,
.group-card .first-row .names {
    /* parent theme's hard-coded size is wrong */
    flex: 1 1 calc(100% - 120px - 16px - 0.75em);
    padding-left: 0;
}
.user-card-avatar, /* pop-up widget */
.d-user-card__avatar img.avatar, /* pop-up on meta.discourse.org */
.controls .avatar, /* user prefs page */
.user-profile-avatar .avatar, /* user info page */
div.dummy-placeholder {
    background: linear-gradient(-45deg, var(--avatar-bot),var(--avatar-top));
    border: 1px outset var(--avatar-hl);
    border-radius: 6px;
    padding: 5px 6px 6px 5px;
    box-shadow: 0.333em 0.5em 0.5em var(--shadow-color);
    margin-right: 0.75em;
}
.collapsed-info .avatar {
    /* smaller shadow on user info page when not expanded */
    box-shadow: 0.25em 0.25em 0.25em var(--shadow-color);
}
.controls .avatar {
    margin-right: 1em;
}

/********** Topic List widget(s) **********/
/* "Suggested Topics" widget at bottom of pages */
.suggested-topics, /* topic list at bottom of threads */
#list-area .contents, /* front page topic list */
.paginated-topics-list, /* private message list */
.directory-table-container, /* user list */
.search-container .search-header, /* search page big search widget */
.bookmark-list-wrapper, /* bookmarks page */
div.dummy-placeholder {
    margin: 0.75em 0 0.75em 0;
    border: 3px outset var(--post-def-hl);
    background: linear-gradient(var(--post-def-top), var(--post-def-bot));
    /* border-radius: var(--post-border-radius); */
    padding: 5px;
    box-shadow: var(--table-shadows);
}
.topic-list-item, tr {
    /* border-bottom: 1px solid var(--tertiary-500); */
    /* border: 1px solid var(--primary-low); */
    border: none;
    background: var(--table-even-row-bg);
}
.topic-list-item:nth-child(odd), /* topic list rows */
.category-list tr:nth-child(odd), /* category list rows */
.directory table tr:nth-child(odd), /* user list rows */
.summary-category-list tr:nth-child(odd), /* user info page "top categories" */
div.dummy-placeholder {
    background: var(--table-odd-row-bg) !important;
}
.topic-list-item.bookmarked {
    /* important because parent theme set it that way */
    background-color: var(--table-even-row-hl-bg) !important;
}
.topic-list-item.bookmarked:nth-child(odd) {
    /* important because parent theme set it that way */
    background-color: var(--table-odd-row-hl-bg) !important;
}
a.op-bookmark:before {
    content: "BM";
    font-size: 80%;
    color: var(--heatmap-high-color);
    text-shadow: var(--heatmap-high-shadow);
}
tbody {
    border-top: 3px solid var(--post-quote-border);
}
.topic-list .topic-list-header .topic-list-data {
    background-color: var(--table-header-bg);
}
/* topic list table cells, make tables more compact */
.topic-list .topic-list-data {
    /* remove the crazy amount of padding in parent theme */
    padding: 3px 0 2px 0 !important;
    line-height: initial;
}
.topic-list .topic-list-data:first-of-type {
    /* indent the left column slightly */
    padding: 2px 0 0 0.3em !important;
}
.topic-list-main-link a.title, .latest-topic-list-item .main-link a.title, .topic-list .main-link a.title {
    padding: 0;
    margin: 0;
}
#suggested-topics td.main-link {
    width: unset; /* parent theme limits this and it messes with layout */
}
.topic-list .creator, .topic-list .editor {
    margin: 0 0.1em 0 0;
    /* display: inline; */
    float: right;
}
.topic-list .badge-wrapper.bullet {  /* forum category */
    display: none;
    /* float: right; */
}
.mobile-view .topic-list .badge-wrapper.bullet {
    /* mobile leaves a space for it no matter what I do,
     * so I may as well let it display */
    display: inline-block;
}
.badge-wrapper.bullet span.badge-category {
    color: var(--primary-medium);
}

/* num-posts cell uses colors to indicate "posts-to-likes" ratio */
.topic-list .num .badge-posts {
    padding: 0px 5px;
    color: var(--heatmap-none-color);
    text-shadow: var(--heatmap-none-shadow);
}
.heatmap-low, .heatmap-low a,
.heatmap-low .d-icon,
.heatmap-low .d-button-label {
    color: var(--heatmap-low-color) !important;
    text-shadow: var(--heatmap-low-shadow) !important;
}
.heatmap-med, .heatmap-med a,
.heatmap-med .d-icon,
.heatmap-med .d-button-label {
    color: var(--heatmap-medium-color) !important;
    text-shadow: var(--heatmap-medium-shadow) !important;
}
.heatmap-high, .heatmap-high a,
.heatmap-high .d-icon,
.heatmap-high .d-button-label {
    color: var(--heatmap-high-color) !important;
    text-shadow: var(--heatmap-high-shadow) !important;
}

.last-post .poster-avatar {
    margin-right: 5px;
    margin-top: -2px;
    float: right;
}
.last-post .poster-avatar img.avatar {
    width: 1.5em;
    height: 1.5em;
}
.poster-info {
    /* 100% - img.avatar:width - .poster-avatar:margin-right - 2px */
    width: calc(100% - 1.5em - 7px);
}
.topic-list .topic-list-data, .topic-list .creator a, .topic-list .editor a {
    color: var(--quaternary);
}
.topic-list .editor { /* abbreviate last-post author name, if necessary */
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    max-width: calc(100% - 1.5em - 7px - 2em);
}
.topic-list .topic-excerpt {
    display: inline-block;
    margin: 0;
    padding: 0 0 0 1.2em;
}
/* fix excerpt overflow on mobile */
.mobile-view .topic-list .topic-excerpt {
    padding: 0;
    width: 100%; /* parent theme sets 120% ... wtf */
}
.topic-list .topic-list-item-separator .topic-list-data {
    border: none;
    background: var(--last-visit-bg);
}
.topic-list .topic-list-item-separator .topic-list-data span {
    background: var(--last-visit-bg);
    color: var(--last-visit-fg);
    border-radius: 99px;
}

/* make the mobile topic list more compact */
.mobile-view .topic-list .topic-list-data:first-of-type {
    padding: 0.1em 0 !important;
}
.mobile-view .topic-list td .main-link {
    width: 100%;
    padding: 0.2em 0 0 0;
}
.mobile-view .topic-item-stats {
    margin: 0;
}
/*
.mobile-view .topic-item-stats.clearfix {
    clear: none;
    float: right;
}
*/
.mobile-view .topic-item-stats .num.activity {
    margin: 0.333em 0.5em 0 auto;
    padding: 0;
}

/* this pops up sometimes, over the top of other widgets */
.alert {
    color: var(--alert-fg) !important;
    background-color: var(--alert-bg) !important;
    border-radius: var(--button-border-radius);
    border: 3px outset var(--alert-border);
    padding: 0.15em 0.75em !important;
    margin-right: 0.75em !important;
}

/********** user list widget **********/
.directory .user-info a {
    color: var(--primary) !important;
}
.directory table td, .directory table th {
    padding: 0.1em 0.1em;
    border: none;
}

/********** category list **********/
.category-list td {
    padding: 0.1em 0 0;
}
.categories-list .category .category-description {
    margin-top: 0;
}

/* change text color for section headers */
.sidebar-section-header-text {
    color: var(--button-text-hover);
    transition: .75s;
}

.sidebar-more-section-links-details-summary:hover { /* "more" button */
    color: var(--button-text-hover);
    transition: .3s;
}

.sidebar-section-link:hover { /* change topic colors on hover */
    color: var(--sidebar-text-hover);
    transition: 0.3s;
}

/********** search page **********/
.search-container .search-advanced .search-results {
    padding: 0.75em; /* remove huge blank spaces on left/right */
}
.search-container .search-bar,
.search-container .search-filters,
.search-container .search-filters .search-advanced-filters,
div.dummy-placeholder {
    background: unset;
}
.fps-result .author {
    padding: 0;
    margin: 0;
}
.search-container .search-filters details.advanced-filters,
.search-container .search-filters details.search-advanced-additional-options,
.search-container .search-filters .search-advanced-filters .control-group,
.search-container .search-filters details.advanced-filters[open]>summary,
.search-container .search-filters details.search-advanced-additional-options[open]>summary,
div.dummy-placeholder
{
    margin-top: 0.25em;
    margin-bottom: 0;
}

/* notifications page */
.notifications-filter {
    margin-bottom: 0.75em;
}

/********** upper-right menu **********/
.user-menu.revamped {
    /* header bar icons display a border over the user menu, unless
       we set the z-index reeeeeally high, and for some reason,
       those icons refuse to have their border removed */
    z-index: 10000;
}
.menu-panel.drop-down {
    border-radius: 0 0 0 var(--button-border-radius);
    box-shadow: -0.5em 1em 1em var(--menu-shadow-color);
}
.user-menu.revamped .quick-access-panel li {
    background-color: unset;
    border: 1px outset #00000000;
    border-radius: var(--button-border-radius);
    transition: var(--hover-anim-time);
}
.user-menu.revamped .quick-access-panel ul {
    /* ensure hidden items are entirely hidden */
    gap: 0em 5em;
}
/* notifications (one per) */
.user-menu .quick-access-panel li {
    /* prevent shadow from getting clipped */
    max-width: calc(100% - 0.3em);
}
/* unread notifications */
.user-menu.revamped .quick-access-panel li.unread,
.user-menu.revamped .quick-access-panel li.pending {
    border: 1px outset var(--button-border);
    margin: 0.1em 0; /* small gap between unread items */
    box-shadow: 0.1em 0.1em 0.2em var(--shadow-color);
    background: var(--button-bg);
}
.user-menu.revamped .quick-access-panel li:hover {
    border: 1px outset var(--button-border);
    background: var(--highlight-medium) !important;
    box-shadow: var(--hover-mini-shadow-args) !important;
}
.user-menu .quick-access-panel li a {
    /* slightly reduce size of notification items */
    margin: 0.15em;
}
.drop-down-mode .d-header-icons .active .icon,
.d-header-icons .icon,
.icons,
li.active,
.icon {
    /* try to remove the dang border! */
    /* (it refuses to disappear though) */
    border: none !important;
    outline: none !important;
}
.menu-panel .panel-body { /* full menu when screen is too narrow */
    max-height: 100%;  /* allow menu to fill the screen vertically */
}
/* menu sections in upper right */
.user-menu.revamped .menu-tabs-container {
    box-shadow: 0.25em -0em 1em var(--shadow-color);
    background-color: var(--sidebar-border);
    border-radius: 0 0 0 var(--button-border-radius);
    height: min-content;
    padding: 0.75em 0.25em 0.25em 0.25em;
}
.user-menu.revamped .bottom-tabs {
    border: none;
}

/********** misc buttons **********/
/* lots of site buttons */
.btn {
    border-radius: var(--button-border-radius);
    border: 1px outset var(--button-border);
    background: var(--button-bg);
    box-shadow: var(--button-shadows);
    transition: var(--hover-anim-time);
}

/* "Summarize This Topic" and "Reply" buttons */
.btn-primary {
    border-radius: var(--button-border-radius);
    border: 1px outset var(--button-primary-border);
    background: var(--button-primary-bg);
    box-shadow: var(--button-shadows);
    transition: var(--hover-anim-time);
}
.btn-flat {
    box-shadow: none;
    border: none;
    background: none;
    transition: var(--hover-anim-time);
}
.quote-button {
    box-shadow: var(--hover-shadow-args);
    transition: var(--hover-anim-time);
}
.btn:hover, .btn-primary:hover, .btn-flat:hover, .quote-button:hover {
    box-shadow: var(--hover-shadow-args);
}

/* hamburger button in the page header */
.header-sidebar-toggle button {
    background: var(--sidebar-toggle-button-bg);
    border: none;
    border-radius: 10px;
}
.header-sidebar-toggle button .d-icon {
    color: var(--sidebar-toggle-button-fg);
}

/* "Tracking" button */
.select-kit-header {
    border: 1px outset var(--button-border) !important;
    background: var(--button-bg) !important;
}
.select-kit-header:hover {
    background: var(--primary-medium) !important;
}
.discourse-no-touch .btn:hover {
    background: var(--primary-medium);
}
.discourse-no-touch .btn-flat:hover {
    background: unset;
}

/********** timeline **********/
/* make it obvious the dates are clickable */
.timeline-date-wrapper a {
    background: var(--button-bg);
    border-radius: 12px;
    border: 1px outset var(--button-border);
    padding: 0.2em 0.4em;
    box-shadow: var(--button-shadows);
    transition: var(--hover-anim-time);
}
.timeline-date-wrapper a:hover {
    box-shadow: var(--hover-shadow-args);
}
/* bottom right corner version */
#topic-progress {
    border-radius: 12px;
    background: var(--secondary);
    color: var(--primary);
    border: 4px outset var(--timeline-handle-border);
    box-shadow: 0.25em 0.25em 1.0em var(--menu-shadow-color);
    margin-bottom: 0.5em;
    outline: none;
    padding: 0;
}
#topic-progress .bg {
    border-radius: 8px;
    background: linear-gradient(var(--timeline-handle-top), var(--timeline-handle-bot));
    /* sometimes it doesn't quite reach the top and bottom for some reason */
    margin: -0.4px 0 -0.2px 0;
}
.timeline-scrollarea {
    margin-left: 0.75em !important;
    border-left: 1em solid var(--timeline-scrollbar-bg) !important;
    transition: var(--hover-anim-time);
}
.timeline-handle {
    width: 0.6em !important;
    background: linear-gradient(var(--timeline-handle-top), var(--timeline-handle-bot));
    border: 0.15em outset var(--timeline-handle-border);
    margin-left: -0.75em !important;
    transition: var(--hover-anim-time);
}

.timeline-scrollarea:hover { /* change color of scrollbar handle on hover */
    color: var(--timeline-handle-hover);
    --timeline-handle-top: var(--timeline-handle-hover);
    --timeline-handle-bot: var(--timeline-handle-hover);
}
.timeline-scrollarea:active,
.timeline-handle:active { /* change color of scrollbar handle on click */
    color: var(--timeline-handle-click);
    --timeline-handle-top: var(--timeline-handle-click);
    --timeline-handle-bot: var(--timeline-handle-click);
}

.d-label:hover,
.timeline-scroller-content:hover { /* change color of date buttons on hover */
    color: var(--button-text-hover);
    transition: var(--hover-anim-time);
}
.d-label:active,
.timeline-scroller-content:active {  /* change color of date buttons on click */
    color: var(--timeline-handle-click);
}

/* a "back" button sometimes pops up over the timeline */
.timeline-last-read {
    margin-left: -1em !important;
}
.timeline-last-read svg {
    margin: 0 !important;
    padding: 0 !important;
}
/* ensure the "123 / 456 Jan 23" part has enough room, and is visible
 * (sometimes it was failing, no clue why, but it couldn't even show
 *  things like "3 / 8 Jan 1")
 */
.timeline-container .topic-timeline .timeline-scrollarea {
    min-width: 5em;
}
.timeline-container .topic-timeline .timeline-replies,
.timeline-container .topic-timeline .timeline-ago {
    overflow: visible;
    max-width: unset;
}
.timeline-container .topic-timeline .timeline-scroller-content {
    overflow: visible;
    padding-left: 0.5em;
    max-height: 4em;
}

/********** pop-up thingy when clicking on num posts in topic list **********/
#topic-entrance {
    border-radius: var(--button-border-radius);
    border: 1px outset var(--button-border);
    /* background: var(--secondary); */
    box-shadow: 0.25em 0.25em 1.0em var(--menu-shadow-color);
    padding: 0.5em;
}

/********** tag box (like posts tagged "review") **********/
a.discourse-tag, a.hashtag-cooked, .discourse-tag.box {
    color: var(--tag-fg) !important;
    background-color: var(--tag-bg);
    border-radius: 99px;
    padding: 0px 6px;
    font-size: var(--font-down-1);
}

/* user titles, group names, etc */
.names .new_user, .names .user-title {
    color: var(--user-title-fg);
    background-color: var(--user-title-bg);
    border-radius: 99px;
    padding: 0px 6px;
}
.names .new_user a, .names .user-title, .names .user-title a {
    color: var(--user-title-fg);
}

/********** "skip to content" button (pops up sometimes) **********/
a#skip-link {
    outline: none;
    color: var(--secondary);
    background: var(--button-primary-bg);
    border: 3px outset var(--post-quote-border);
    border-radius: var(--button-border-radius);
}

/********** polls **********/
div.poll {
    margin: 0.5em 0;
    border: none;
}
div.poll .poll-container {
    padding: 0 0 0 0.5em;
    margin-bottom: 0.5em;
    border: none;
}
div.poll .poll-buttons {
    border: none;
}
div.poll .results li:first-of-type {
    padding-top: 0;
}
.poll .results {
    border: 1px inset var(--post-embed-hl);
    background: linear-gradient(var(--post-embed-top), var(--post-embed-bot));
    padding: 0.5em;
    border-radius: var(--post-border-radius);
}
/* fix result area overflowing on mobile */
div.poll ul, div.poll ol {
    width: calc(100% - 1em);
}
/* display poll options as buttons */
div.poll li[data-poll-option-id] {
    margin: 0 0 0.5em 0;
    padding: 0.25em;
    border: 1px outset var(--button-border);
    border-radius: var(--button-border-radius);
    background: var(--button-bg);
    /* transition: var(--hover-anim-time); */
    transition: 0s; /* animation on this looks weird */
}
div.poll li[data-poll-option-id]:hover {
    background: var(--highlight-medium);
    box-shadow: var(--hover-shadow-args);
    border: 1px outset var(--button-border);
}
/* make it more clear which item is chosen */
.poll svg.d-icon-circle {
    border-radius: 99px;
    border: 1px inset var(--button-border);
    padding: 2px;
    background: #00000040;
}
.poll svg.d-icon-far-circle {
    border-radius: 99px;
    border: 1px outset var(--button-border);
    padding: 2px;
    background: #ffffff40;
}
.poll li:has(svg.d-icon-circle) {
    border: 1px inset var(--button-border);
    background: linear-gradient(var(--post-embed-top), var(--post-embed-bot));
}

/********** common elements found everywhere **********/
/* @username mentions */
a.mention, a.mention-group {
    color: var(--mention-color);
    background: var(--mention-bg);
    transition: var(--hover-anim-time);
}
a.mention:hover, a.mention-group:hover {
    box-shadow: var(--hover-shadow-args);
}

/* dot which shows up on unread posts */
.read-state {
    color: var(--unread-dot-color);
    margin-left: 0.5em;
    position: relative;
}
.read-state.read {
    position: absolute;
    /* display: none; */
}

/* less padding around paragraphs */
p {
    margin-block-start: 0.5em;
    margin-block-end: 0.5em;
}

/********** scrollbars **********/
*::-webkit-scrollbar {
    /* background: #00000000; */
    background: var(--main-scrollbar-bg);
    border-radius: 100px;
}

*::-webkit-scrollbar-track {
    /* color of the tracking area */
    background: #00000000;
    /* background: var(--timeline-scrollbar-bg); */
    border-radius: 100px;
}

*::-webkit-scrollbar-thumb {
    /* creates padding around scroll thumb */
    border: 0.15em outset var(--timeline-handle-border);
    border-radius: 100px;
    color: var(--primary);
    /* color of the scroll thumb */
    background: linear-gradient(var(--timeline-handle-top), var(--timeline-handle-bot));
    /* box-shadow: var(--button-shadows); */ /* nope, hits a browser bug */
}

* {
    /* firefox, I think */
    /* scroll thumb and track */
    scrollbar-color: var(--main-scrollbar-button) var(--main-scrollbar-bg);
}



/********** theme posts per user type **********/
/* make OP visible */
.topic-owner article {
    border: 1px outset var(--post-op-hl);
    background: linear-gradient(var(--post-op-top), var(--post-op-bot));
}
/* using ">" to avoid styling embedded posts */
.topic-owner > article > .row > .topic-body > .topic-meta-data {
    background: linear-gradient(var(--post-op-bar-top), var(--post-op-bar-bot));
}
.topic-owner article > .row > .topic-avatar {
    background: linear-gradient(-45deg, var(--post-op-bar-bot), var(--post-op-bar-top));
    border: 1px outset var(--post-op-bar-top);
}
/* table of contents on first post */
.d-toc-main {
    border: 1px outset var(--post-op-hl);
    background: linear-gradient(var(--post-op-top), var(--post-op-bot));
}
.d-toc-main a {
    color: var(--tertiary);
}


/* make current user visible */
.current-user-post article {
    border: 1px outset var(--post-me-hl);
    background: linear-gradient(var(--post-me-top), var(--post-me-bot));
}
.current-user-post > article > .row > .topic-body > .topic-meta-data {
    background: linear-gradient(var(--post-me-bar-top), var(--post-me-bar-bot));
}
.current-user-post article > .row > .topic-avatar {
    background: linear-gradient(-45deg, var(--post-me-bar-bot), var(--post-me-bar-top));
    border: 1px outset var(--post-me-bar-top);
}

/* make admins visible */
/* Discourse lacks the right markup, so add one line per user ID */
article[data-user-id="1"],
div.dummy-placeholder {
    border: 1px outset var(--post-admin-hl);
    background: linear-gradient(var(--post-admin-top), var(--post-admin-bot));
}
article[data-user-id="1"] > .row > .topic-body > .topic-meta-data,
div.dummy-placeholder {
    background: linear-gradient(var(--post-admin-bar-top), var(--post-admin-bar-bot));
}
article[data-user-id="1"] > .row > .topic-avatar,
div.dummy-placeholder {
    background: linear-gradient(-45deg, var(--post-admin-bar-bot), var(--post-admin-bar-top));
    border: 1px outset var(--post-admin-bar-top);
}

/********** vars **********/
:root {
    /* --topic-avatar-width: 85px; */
    /* sizing, spacing, etc */
    --topic-body-width: 100%;
    --d-button-border-radius: 12px;
    --below-topic-margin: 0;
    /* thread post formatting */
    --post-border-radius: 10px;
    --post-padding: 8px;
    --button-border-radius: 16px;
    --hover-anim-time: 0.25s;
    /* --hover-border-radius: 30px; */
    --hover-shadow-args: 0.15em 0.3em 0.5em #000000a0;
    --hover-mini-shadow-args: 0.1em 0.1em 0.2em #000000e0;
    /* these defaults override theme colors...
    --button-text-hover: #efefef;
    --sidebar-text-hover: #68b9c8;
    --timeline-handle-hover: #efefef;
    --timeline-handle-click: #68b9c8;
    --heatmap-high-color: #fe7a15;
    --heatmap-low-color: #9b764f;
    --post-action-bar-border-radius: 6px;
    */
    --section-border-width: 4px;
    /* reduce line heights a bit (default is 1.0 / 1.2 / 1.4) */
    --line-height-small: 1em;
    --line-height-medium: 1.16em;
    --line-height-large: 1.33em;
}
