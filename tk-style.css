/* Comments use this structure:
- div.topic-post
  - article
    - div.row
      - div.topic-avatar
      - div.topic-body
        - div.topic-meta-data
        - div."regular contents"
          - div.cooked (comment body)
          - section.post-menu-area (buttons below comment)
*/

/* some posts get a bogus min-height style, unsure why */
div.topic-post {
    min-height: 0px !important;
}

/* outer container for comments */
/* using "article" instead of "div.topic-post"
 * because "article" has more attributes to select by,
 * like for per-user styling */
article {
    border: 1px outset #444;
    background: linear-gradient(#333, #282828);
    border-radius: 10px;
    /* padding: 0px 0px 0px 0px; */
    padding: 8px;
    margin: 0px 0px 10px 0px;
}

/* extra messages at top of post, like "it's been a while since we saw this user" */
.post-notice {
    /* display: none; */
    padding: 2px;
    margin-bottom: 8px;
    max-width: 100%; /* remove arbitrary limit, go as wide as the post */
    background: linear-gradient(-2deg, #292929, var(--highlight));
    border-radius: 8px;
    border: 1px outset var(--highlight);
    color: var(--secondary-or-primary);
}

/* draw a box around avatar pics */
div.topic-avatar, .embedded-posts .topic-avatar {
    background: linear-gradient(-45deg, #292929,#555);
    border: 1px outset #555;
    border-radius: 6px;
    padding: 5px 6px 6px 5px;
    margin: 0px 6px 0px 0px;
    /* border: none; */
}

/* remove horizontal line between comments */
/* .topic-avatar, .topic-body {
    border-top: none;
} */

.topic-body {
    padding: 0;
    /* border: 1px outset #555; */
    /* border-left: 1px solid #555; */
    border: none;
    border-radius: 8px;
}

/* put the post header data into a themed bar */
div.topic-meta-data {
    background: linear-gradient(#57b, #235);
    /* padding: 3px 2px 3px 3px; */
    /* margin: 0px 0px 0px 5px; */
    margin: 0px;
    border-radius: 6px 6px 0px 0px;
    border-style: none;
}
/* avatar in reply-to header */
.reply-to-tab img.avatar {
    position: absolute;
    margin-left: 18px;
    margin-top: 4px;
}
.reply-to-tab .d-icon-share {
    margin-right: 32px;
}
.post-info.edits {
    background-color: #00000028;
    border-radius: 4px;
    margin: 0.15em 0.5em 0 0;
    padding: 0.06em 0 0.06em 0;
}

/* main comment body */
.topic-body .cooked {
    /* padding: 5px 10px 0px 10px; */
    padding: 5px 0px 0px 0px;
    margin: 0px;
    /* background: linear-gradient(#ffffff20, #00000040); */
    border-radius: 0px 0px 8px 8px;
}

/* remove extra space after last paragraph of each comment */
.cooked p:last-of-type {
    margin-bottom: 2px;
}

/* remove extra space at bottom of comments */
section.post-menu-area, section.post-actions {
    margin: 0px;
}

/* reduce extra space around buttons at bottom of comments */
nav.post-controls .actions button, nav.post-controls .show-replies {
    padding: 0px 5px;
}

/* container for buttons at the bottom of posts */
div.actions {
    /* border-top: 1px solid #444; */
    /* padding-top: 5px; */
    padding: 5px;
    /* border: 1px inset #333; */
    /* background: linear-gradient(90deg, transparent,rgba(0,0,0, 0.2)); */
    border-radius: 6px;
    background: rgba(0,0,0, 0.2);
}

/* style quoted posts */
aside.quote {
    /* padding-top: 0.25em; */
    margin-top: 0;
    margin-bottom: 0;
    /* border-radius: 8px; */
}
aside.quote img.avatar {
    /* display: none; */ /* unsure why this doesn't work */
    /* width: 0; */
    /* height: 0; */
    /* margin: 0; */
    /* padding: 0; */
    /* width: 24px; */
    /* height: 24px; */
    /* background: linear-gradient(-45deg, #292929,#555); */
    /* border: 1px outset #555; */
    /* border-radius: 6px; */
    /* padding: 3px 4px 4px 3px; */
}
.quote aside .quote { /* remove inconsistent blockquote border */
    border-left: 0;
}
blockquote,
aside.quote .title,
.quote aside blockquote,
.quote aside aside.quote>blockquote,
.quote aside aside.quote>.title
{ /* add a consistent blockquote border */
    border-left: 5px solid #ffffff30;
}
blockquote {
    padding: 0.5em;
    margin: 0;
}
aside.quote .title {
    background: linear-gradient(#5577bb60, #22335560);
    /* background: rgba(0,0,0, 0.2); */
    /* border-left: 0; */
    padding: 0.25em;
}
aside.quote .title { /* top right corner of a quote */
    border-radius: 0 8px 0 0;
}
blockquote, .quote aside blockquote { /* bottom right corner of a quote */
    border-radius: 0 0 8px 0;
}
.quote-controls {
    margin: 0.2em 0.2em 0.1em 0;
}


/* make embedded posts (expanded replies) look indented */
.embedded-posts {
    /* margin-top: 10px; */
    border: none;
    /* border-radius: 10px; */
    /* padding: 5px; */
    /* background: linear-gradient(#222, #111); */
}
.embedded-posts .reply {
    margin-top: 10px;
    padding: 5px;
    border: 1px inset #444;
    border-radius: 10px;
    background: linear-gradient(#2b2b2b, #1c1c1c);
}
.embedded-posts.bottom {
    margin-bottom: 0px;
}

/* linked threads at bottom of post */
.post-links-container .post-links {
    margin-top: 0.5em;
    padding-top: 0.5em;
}
.post-links-container .post-links li:last-of-type {
    margin-bottom: 0em;
}

/* last-visited line */
.small-action.topic-post-visited .topic-post-visited-line {
    width: 100%;
    border-bottom: 1px solid var(--danger-medium);
    margin: 8px 12px 20px 12px;
}
.small-action.topic-post-visited .topic-post-visited-line .topic-post-visited-message {
    /* background-color: var(--secondary); */
    background-color: var(--danger-medium);
    padding: 0.1em 0.6em;
    color: #000;
    /* text-shadow: 0 0 5px var(--danger-medium); */
    /* font-weight: bold; */
    border-radius: 6px;
}

/* time gap widget */
.time-gap, .time-gap.small-action {
    border: none;
}
.time-gap .topic-avatar {
    display: none; /* there is no avatar; it just makes an empty box */
}
.small-action .small-action-desc {
    border: none;
}

/* quoted part of a post, when expanded to show the rest */
span.highlighted {
    /* background-color: var(--tertiary-medium); */
    /* color: var(--primary-very-high); */
    /* background: none; */
    color: var(--tertiary);
}

/* "topic map" at bottom of first post */
.topic-map {
    margin: 0.5em 0 0 -4em;
    border-radius: 8px;
    border: 1px outset #444;
}
.topic-map section {
    border: none;
    border-radius: 8px;
}
.topic-map .buttons .btn {
    border-radius: 20px;
    padding: 0 0.7em;
    margin: 0.5em 0.5em;
}
.map:first-of-type .buttons .btn {
    max-height: 2.5em;
}

/* private messages have special styling from the parent theme, which needs to be unset */
/* the selectors are copied from the parent theme */
.topic-post.sticky-avatar .topic-avatar {
    margin-bottom: 0;
}
.archetype-private_message .topic-avatar {
    /* background: linear-gradient(-45deg, #292929,#555); */
    border: 1px outset #555;
    /* border-radius: 6px; */
    /* padding: 5px 6px 6px 5px; */
    /* margin: 0px 6px 0px 0px; */
}
.archetype-private_message .current-user-post:not(.moderator) .topic-body .cooked {
    background: none;
}
.archetype-private_message .topic-body .cooked,
.archetype-private_message .current-user-post .topic-body .cooked {
    border: none;
}
.archetype-private_message .topic-body .cooked {
    margin: 0;
    padding: 5px 0px 0px 0px;
}
.archetype-private_message {
    --border-radius: 8px;
}
.archetype-private_message .topic-map {
    margin-left: -4em;
    border: 1px outset #444;
    border-radius: 8px;
    padding: 0;
}

a.mention, a.mention-group {
    color: #0ce;
    background: #045;
    /* text-shadow: 0 0 5px #000; */
}

/* less padding around paragraphs */
p {
    margin-block-start: 0.5em;
    margin-block-end: 0.5em;
}

:root {
    /* --topic-avatar-width: 85px; */
    --primary: #ccc;
    --secondary: #222;
    --primary-high-or-secondary-low: #fff;
    --primary-med-or-secondary-med: #ccc;
    --danger-medium: #2bbcf5;
}

/* make OP visible */
.topic-post.topic-owner article {
    border: 1px outset #21594e;
    background: linear-gradient(#144337, #15321e);
}
.topic-post.topic-owner div.topic-meta-data {
    background: linear-gradient(#33aa96, #114426);
}

/* make current user visible */
.topic-post.current-user-post article {
    border: 1px outset #535;
    background: linear-gradient(#402244, #212);
}
.topic-post.current-user-post div.topic-meta-data {
    background: linear-gradient(#a39, #413);
}

/* make admins visible */
article[data-user-id="1"],
.topic-post.topic-owner article[data-user-id="1"],
div.dummy-placeholder
{
    border: 1px outset #214566;
    background: linear-gradient(#223644, #141b28);
}

article[data-user-id="1"] div.topic-meta-data,
/* .topic-post.topic-owner article[data-user-id="1"] div.topic-meta-data, */
div.dummy-placeholder
{
    background: linear-gradient(#358ca6, #431144);
}
